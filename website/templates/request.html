{% extends "base.html" %}
{% block title %}Student Request{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/colors.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/titles.css') }}">
<style>
.info-card {
    background: var(--text-main-white);
    border-radius: 22px;
    padding: 30px;
    box-shadow: 0 12px 35px rgba(0,0,0,0.08);
    margin-bottom: 20px;
    transition: 0.3s ease;
    color: var(--text-main-black);
}
input, select {
    width: 100%;
    padding: 5px;
    border: 1px solid #444;    /* Subtle border for inputs */
    color: var(--text-main-black);               /* White text inside inputs */
    border-radius: 4px;
}
button {
  background-color: #007bff; /* Standard blue button */
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
</style>
{% endblock %}

{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="flash {{ category }}">
  {{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}

<h1 class="title">Create a Request</h1>
    <div class="subtitle">Please let us know what you need.</div> 

<div style="display: flex; gap: 20px; align-items: flex-start;">
  <form method="POST">
    <div class="info-card">
      <label>Student ID (CCID):</label>
      <input type="text" name="student_id" required><br><br>
      <label>Email:</label><br>
      <input type="email" name="email" required><br><br>
      <label>First Name:</label><br>
      <input type="text" name="first_name" required><br><br>
      <label>Last Name:</label><br>
      <input type="text" name="last_name" required><br><br>
      <label>Start Location:</label><br>
      <select name="s_loc">
        {% for loc in pickup_locations %}
        <option value="{{ loc.location_id }}">{{ loc.name }}</option>
        {% endfor %}
      </select><br><br>
      <label>End Location:</label><br>
      <select name="e_loc">
        {% for loc in all_locations %}
        <option value="{{ loc.location_id }}">{{ loc.name }}</option>
        {% endfor %}
      </select><br><br>
    </div>
    <button type="submit">Submit Request</button>
  </form>

  <div id="map" style="width:600px; height:450px;"></div>

  <script>
    function initMap() {
      new google.maps.Map(document.getElementById("map"), {
        center: { lat: 53.5461, lng: -113.4938 },
        zoom: 12,
        disableDefaultUI: true,       // removes all controls
        gestureHandling: "greedy",    // allows normal scroll/drag
        keyboardShortcuts: false
      });
    }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key={{ maps_key }}&callback=initMap" async defer>
  </script>
</div>

{% endblock %}